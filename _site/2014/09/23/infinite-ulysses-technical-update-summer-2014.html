<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LiteratureGeek.com: Infinite Ulysses Technical Update: Summer 2014</title>
  <meta name="author" content="" />
  <meta name="description" content="Literature Geek" />
  <link rel="canonical" href="http://localhost:4000/2014/09/23/infinite-ulysses-technical-update-summer-2014" />

  <link href="//fonts.googleapis.com/css?family=Open+Sans:600" rel="stylesheet" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=Lora:400,400italic,700' rel='stylesheet' type='text/css'>
  <link rel="shortcut icon" href="/favicon.png">
  <link rel="alternate" type="application/atom+xml" title="Literature Geek" href="http://localhost:4000/atom.xml" />

  <link rel="stylesheet" href="/assets/css/all.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" >
  
  <!-- Begin Jekyll SEO tag v2.2.3 -->
<title>Infinite Ulysses Technical Update: Summer 2014 | Literature Geek</title>
<meta property="og:title" content="Infinite Ulysses Technical Update: Summer 2014" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The core functionality of my website is the ability to highlight pieces of the Ulysses text and leave annotations on them (questions/answers, interpretations, contextualizations, notes); to achieve this, I&#39;m building off Annotator.js—Javascript code that lets you do what I just described, with a variety of plugin code that lets you add neat features like a heatmap of where the most annotations appear on a text (e.g. on what pages did readers have the most questions? what pages had the most contentious interpretations?). Since the site itself is built with Drupal, I&#39;m using the Drupal modules already built to let Annotator.js work with, for example, Drupal&#39;s database as the place to store readers&#39; annotations. Not as easy as it sounded (is it ever?) That&#39;s the Drupal logo under the skull and crossbones. This was on my home dry-erase board for a while... My original project plan was to spend a lot of time coding the look and behavior of the reading interface, with the site functionality not re-inventing various wheels, but instead making connections among existing sets of code that allow textual annotation and social commentary, voting, ranking, etc. In practice, the existing Drupal-module versions of Annotator.js are buggy. Two big examples (for me): the Drupal Annotation modules (Annotation and Annotator) don&#39;t store tags added to annotations, so any tags added by a reader disappear forever on refreshing or changing the page (and tags really need to be treated as entities in their own right, and tied into the core Drupal taxonomy); and the code that sets up an individual textual annotation to be an &quot;entity&quot; (a Drupal type of content—such as a blog post, book page, or comment—that other existing Drupal modules automatically know how to act on) isn&#39;t completely working either (e.g. you can&#39;t add fields—such as a field to add tags to an annotation, fixing the tag storage problem—with the current code). Having everything not go as smoothly as planned was actually great, though! I had a realistic goal in terms of what I needed to get done by the end of the summer to stay on track (have the site&#39;s main functions almost all working, ready to be completely finished at the end of September), and I wasn&#39;t worried about doing different work than expected to achieve those goals. Having the Drupal annotation modules need more work than expected meant I got to spend the summer trying various things to solve these issues, and learning a lot in consequence—like creating non-basic custom Drupal entities. For example, I learned how to make a custom entity fieldable (able to have fields, like a place where you can add tags and have them autocomplete if they match existing tags) and add some fields to it, both by writing code (&quot;programmatically&quot;) as well as via the Drupal admin interface (after making the annotation visible to the core Field UI module). I also read through the Annotator code so many times that I became much more comfortable with it, so I&#39;ll be able to augment it in the future far more easily. In the end, it looks like I&#39;ll be building off the code fix created by another DH developer who was kind enough to start an online conversation with me about our mutual work improving textual annotation in Drupal (more on that project once they&#39;ve decided to make their code public). I went back and forth about whether I wanted to build off their solution or keep hacking at my own, but in the end I hadn&#39;t been expecting to need to make those code fixes in the first place, so I decided I&#39;d keep my remaining coding time this year free for expected work with the actual reading interface, like making a heatmap of the annotations and porting other existing Javascript/Coffeescript plugins to work with the Drupal version of Annotator. Other summer work Screengrab of many many tabs open across the top of my browser. A fairly normal view when I&#39;m coding! Patching. I submitted an extremely simple patch to the Drupal Annotation module (fixing a misspelled variable) as a way of learning the process; my patch was accepted into the module. Now I know how to create patches when I want to share further work with others using Drupal Annotation. Installation profiles. I&#39;m currently working on two separate local versions of the Infinite Ulysses website: one to work on improving the Annotation function code, and one for work on everything else (e.g. user profiles, site content, theming). As I work on the site&#39;s annotation abilities, I fairly often want to reinstall the site as a slightly quicker alternative to weeding all the references to annotation code out of the database (I should set up uninstall hooks to do this for me eventually...), or to see whether the code works correctly when installing the modules into a new site. Keeping the annotation work on a separate site lets me do this without losing my other work on the site. But! I don&#39;t want to start from a standard Drupal blank site every time I need to reinstall my annotation code; I want a sample page of Ulysses to test the code on, user permissions already set up, modules installed, and various other things configured that I&#39;d rather not do manually every time I reinstall the site. Installation profiles are a way to avoid starting from square one with a Drupal site, instead automatically pre-configuring the site as you&#39;d like it to be (think of it like a module that tells the site to configure and install things a certain way during the site installation process). When I visit install.php, I now have a &quot;Infinite Ulysses Pop-Up&quot; option in addition to standard or minimal Drupal installations. Eventually, this profile will turn into a distribution, such that anyone can use it to install a Drupal site pre-configured to act as a participatory digital edition. Annotation sidebar. The Annotator.js code I&#39;m working with displays annotations as pop-ups hovering over the text, but from experience with my UlyssesUlysses prototype and usability research, I prefer having annotations authored and displayed in a sidebar. This will also be handy for the tablet version of the website, as you&#39;ll be able to slide the annotation sidebar off and on the page like a drawer. I&#39;ve been playing around with a couple ways of achieving this: modifying this existing CoffeeScript or this extension of that code (demo&#39;d here) to work with Drupal, creating the sidebar by resetting the current CSS on annotation pop-ups and styling them into a sidebar, or a tactic such as this repo which purports to display annotations as Drupal comments. Book-page styling. I&#39;ve been vacillating a bit as to the final display structure of the novel: I&#39;m pretty sure I either want to have one page per chapter of the book and infinite scroll to put all the text of a chapter on one page, or have separate pages to match up with each page of the 1922 text of the novel (which I&#39;m using). This is something I might end up doing A/B testing on, showing the text to some visitors one way and to other visitors the other way, and comparing their reactions and stats such as time spent on the site. Here are some questions I&#39;ll need whatever solution I use to address: How many annotations can load on a page at a time? How does this limit or non-limit affect site speed? How do annotations load on a very long page that only loads partial sections of the text at a time (when they&#39;re scrolled to, i.e. infinite scroll)? How will bookmarking on the site work—will a reader&#39;s last visited and furthest page in the book be marked as where they should start next, or will users have the option (or necessity) to bookmark one or more pages themselves? If I do offer one long scrolling webpage per chapter of the novel, can I easily generate bookmarks that jump a reader down to the last line they were reading? What other ways can users chart their progress through the book, such as badges per chapter, or a progress bar for pages read? What if readers want to read it out of order, or only some parts online (and mark parts they read offline as completed)? What if they want to glance ahead without losing the bookmark at where they actually want to pick up reading next? Long-term thinking. I met with the artist and IP lawyer behind the excellent web/iPad comic of Ulysses (Ulysses Seen). We&#39;re all keenly interested in opening Ulysses to more public reading and conversation; they want a way for comic readers to be able to jump from the comic to the text, and I&#39;m also interested in supporting the comic&#39;s readers in enjoying the text—so we&#39;ve been discussing combining our websites into one super-accessible, textual and visual Ulysses edition, after I&#39;ve defended my dissertation. This is also a good way for me to think about how I&#39;ll manage hosting costs and moderation effort in the future. Other summer activities included lots of reading (as much as I read, I&#39;m always adding more links to my reading list every time I go on Twitter), researching the social modules I want to use on annotations, and drafting site content. In particular, I&#39;ve been looking into how existing communities (especially online ones where people submit text and/or converse) have succeeded in building friendly spaces, self-moderating, creating community guidelines, and fostering an inclusive and welcoming atmosphere." />
<meta property="og:description" content="The core functionality of my website is the ability to highlight pieces of the Ulysses text and leave annotations on them (questions/answers, interpretations, contextualizations, notes); to achieve this, I&#39;m building off Annotator.js—Javascript code that lets you do what I just described, with a variety of plugin code that lets you add neat features like a heatmap of where the most annotations appear on a text (e.g. on what pages did readers have the most questions? what pages had the most contentious interpretations?). Since the site itself is built with Drupal, I&#39;m using the Drupal modules already built to let Annotator.js work with, for example, Drupal&#39;s database as the place to store readers&#39; annotations. Not as easy as it sounded (is it ever?) That&#39;s the Drupal logo under the skull and crossbones. This was on my home dry-erase board for a while... My original project plan was to spend a lot of time coding the look and behavior of the reading interface, with the site functionality not re-inventing various wheels, but instead making connections among existing sets of code that allow textual annotation and social commentary, voting, ranking, etc. In practice, the existing Drupal-module versions of Annotator.js are buggy. Two big examples (for me): the Drupal Annotation modules (Annotation and Annotator) don&#39;t store tags added to annotations, so any tags added by a reader disappear forever on refreshing or changing the page (and tags really need to be treated as entities in their own right, and tied into the core Drupal taxonomy); and the code that sets up an individual textual annotation to be an &quot;entity&quot; (a Drupal type of content—such as a blog post, book page, or comment—that other existing Drupal modules automatically know how to act on) isn&#39;t completely working either (e.g. you can&#39;t add fields—such as a field to add tags to an annotation, fixing the tag storage problem—with the current code). Having everything not go as smoothly as planned was actually great, though! I had a realistic goal in terms of what I needed to get done by the end of the summer to stay on track (have the site&#39;s main functions almost all working, ready to be completely finished at the end of September), and I wasn&#39;t worried about doing different work than expected to achieve those goals. Having the Drupal annotation modules need more work than expected meant I got to spend the summer trying various things to solve these issues, and learning a lot in consequence—like creating non-basic custom Drupal entities. For example, I learned how to make a custom entity fieldable (able to have fields, like a place where you can add tags and have them autocomplete if they match existing tags) and add some fields to it, both by writing code (&quot;programmatically&quot;) as well as via the Drupal admin interface (after making the annotation visible to the core Field UI module). I also read through the Annotator code so many times that I became much more comfortable with it, so I&#39;ll be able to augment it in the future far more easily. In the end, it looks like I&#39;ll be building off the code fix created by another DH developer who was kind enough to start an online conversation with me about our mutual work improving textual annotation in Drupal (more on that project once they&#39;ve decided to make their code public). I went back and forth about whether I wanted to build off their solution or keep hacking at my own, but in the end I hadn&#39;t been expecting to need to make those code fixes in the first place, so I decided I&#39;d keep my remaining coding time this year free for expected work with the actual reading interface, like making a heatmap of the annotations and porting other existing Javascript/Coffeescript plugins to work with the Drupal version of Annotator. Other summer work Screengrab of many many tabs open across the top of my browser. A fairly normal view when I&#39;m coding! Patching. I submitted an extremely simple patch to the Drupal Annotation module (fixing a misspelled variable) as a way of learning the process; my patch was accepted into the module. Now I know how to create patches when I want to share further work with others using Drupal Annotation. Installation profiles. I&#39;m currently working on two separate local versions of the Infinite Ulysses website: one to work on improving the Annotation function code, and one for work on everything else (e.g. user profiles, site content, theming). As I work on the site&#39;s annotation abilities, I fairly often want to reinstall the site as a slightly quicker alternative to weeding all the references to annotation code out of the database (I should set up uninstall hooks to do this for me eventually...), or to see whether the code works correctly when installing the modules into a new site. Keeping the annotation work on a separate site lets me do this without losing my other work on the site. But! I don&#39;t want to start from a standard Drupal blank site every time I need to reinstall my annotation code; I want a sample page of Ulysses to test the code on, user permissions already set up, modules installed, and various other things configured that I&#39;d rather not do manually every time I reinstall the site. Installation profiles are a way to avoid starting from square one with a Drupal site, instead automatically pre-configuring the site as you&#39;d like it to be (think of it like a module that tells the site to configure and install things a certain way during the site installation process). When I visit install.php, I now have a &quot;Infinite Ulysses Pop-Up&quot; option in addition to standard or minimal Drupal installations. Eventually, this profile will turn into a distribution, such that anyone can use it to install a Drupal site pre-configured to act as a participatory digital edition. Annotation sidebar. The Annotator.js code I&#39;m working with displays annotations as pop-ups hovering over the text, but from experience with my UlyssesUlysses prototype and usability research, I prefer having annotations authored and displayed in a sidebar. This will also be handy for the tablet version of the website, as you&#39;ll be able to slide the annotation sidebar off and on the page like a drawer. I&#39;ve been playing around with a couple ways of achieving this: modifying this existing CoffeeScript or this extension of that code (demo&#39;d here) to work with Drupal, creating the sidebar by resetting the current CSS on annotation pop-ups and styling them into a sidebar, or a tactic such as this repo which purports to display annotations as Drupal comments. Book-page styling. I&#39;ve been vacillating a bit as to the final display structure of the novel: I&#39;m pretty sure I either want to have one page per chapter of the book and infinite scroll to put all the text of a chapter on one page, or have separate pages to match up with each page of the 1922 text of the novel (which I&#39;m using). This is something I might end up doing A/B testing on, showing the text to some visitors one way and to other visitors the other way, and comparing their reactions and stats such as time spent on the site. Here are some questions I&#39;ll need whatever solution I use to address: How many annotations can load on a page at a time? How does this limit or non-limit affect site speed? How do annotations load on a very long page that only loads partial sections of the text at a time (when they&#39;re scrolled to, i.e. infinite scroll)? How will bookmarking on the site work—will a reader&#39;s last visited and furthest page in the book be marked as where they should start next, or will users have the option (or necessity) to bookmark one or more pages themselves? If I do offer one long scrolling webpage per chapter of the novel, can I easily generate bookmarks that jump a reader down to the last line they were reading? What other ways can users chart their progress through the book, such as badges per chapter, or a progress bar for pages read? What if readers want to read it out of order, or only some parts online (and mark parts they read offline as completed)? What if they want to glance ahead without losing the bookmark at where they actually want to pick up reading next? Long-term thinking. I met with the artist and IP lawyer behind the excellent web/iPad comic of Ulysses (Ulysses Seen). We&#39;re all keenly interested in opening Ulysses to more public reading and conversation; they want a way for comic readers to be able to jump from the comic to the text, and I&#39;m also interested in supporting the comic&#39;s readers in enjoying the text—so we&#39;ve been discussing combining our websites into one super-accessible, textual and visual Ulysses edition, after I&#39;ve defended my dissertation. This is also a good way for me to think about how I&#39;ll manage hosting costs and moderation effort in the future. Other summer activities included lots of reading (as much as I read, I&#39;m always adding more links to my reading list every time I go on Twitter), researching the social modules I want to use on annotations, and drafting site content. In particular, I&#39;ve been looking into how existing communities (especially online ones where people submit text and/or converse) have succeeded in building friendly spaces, self-moderating, creating community guidelines, and fostering an inclusive and welcoming atmosphere." />
<link rel="canonical" href="http://localhost:4000/2014/09/23/infinite-ulysses-technical-update-summer-2014" />
<meta property="og:url" content="http://localhost:4000/2014/09/23/infinite-ulysses-technical-update-summer-2014" />
<meta property="og:site_name" content="Literature Geek" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-09-23T07:55:59-04:00" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"BlogPosting","headline":"Infinite Ulysses Technical Update: Summer 2014","author":{"@type":"Person","name":null},"datePublished":"2014-09-23T07:55:59-04:00","dateModified":"2014-09-23T07:55:59-04:00","description":"The core functionality of my website is the ability to highlight pieces of the Ulysses text and leave annotations on them (questions/answers, interpretations, contextualizations, notes); to achieve this, I&#39;m building off Annotator.js—Javascript code that lets you do what I just described, with a variety of plugin code that lets you add neat features like a heatmap of where the most annotations appear on a text (e.g. on what pages did readers have the most questions? what pages had the most contentious interpretations?). Since the site itself is built with Drupal, I&#39;m using the Drupal modules already built to let Annotator.js work with, for example, Drupal&#39;s database as the place to store readers&#39; annotations. Not as easy as it sounded (is it ever?) That&#39;s the Drupal logo under the skull and crossbones. This was on my home dry-erase board for a while... My original project plan was to spend a lot of time coding the look and behavior of the reading interface, with the site functionality not re-inventing various wheels, but instead making connections among existing sets of code that allow textual annotation and social commentary, voting, ranking, etc. In practice, the existing Drupal-module versions of Annotator.js are buggy. Two big examples (for me): the Drupal Annotation modules (Annotation and Annotator) don&#39;t store tags added to annotations, so any tags added by a reader disappear forever on refreshing or changing the page (and tags really need to be treated as entities in their own right, and tied into the core Drupal taxonomy); and the code that sets up an individual textual annotation to be an &quot;entity&quot; (a Drupal type of content—such as a blog post, book page, or comment—that other existing Drupal modules automatically know how to act on) isn&#39;t completely working either (e.g. you can&#39;t add fields—such as a field to add tags to an annotation, fixing the tag storage problem—with the current code). Having everything not go as smoothly as planned was actually great, though! I had a realistic goal in terms of what I needed to get done by the end of the summer to stay on track (have the site&#39;s main functions almost all working, ready to be completely finished at the end of September), and I wasn&#39;t worried about doing different work than expected to achieve those goals. Having the Drupal annotation modules need more work than expected meant I got to spend the summer trying various things to solve these issues, and learning a lot in consequence—like creating non-basic custom Drupal entities. For example, I learned how to make a custom entity fieldable (able to have fields, like a place where you can add tags and have them autocomplete if they match existing tags) and add some fields to it, both by writing code (&quot;programmatically&quot;) as well as via the Drupal admin interface (after making the annotation visible to the core Field UI module). I also read through the Annotator code so many times that I became much more comfortable with it, so I&#39;ll be able to augment it in the future far more easily. In the end, it looks like I&#39;ll be building off the code fix created by another DH developer who was kind enough to start an online conversation with me about our mutual work improving textual annotation in Drupal (more on that project once they&#39;ve decided to make their code public). I went back and forth about whether I wanted to build off their solution or keep hacking at my own, but in the end I hadn&#39;t been expecting to need to make those code fixes in the first place, so I decided I&#39;d keep my remaining coding time this year free for expected work with the actual reading interface, like making a heatmap of the annotations and porting other existing Javascript/Coffeescript plugins to work with the Drupal version of Annotator. Other summer work Screengrab of many many tabs open across the top of my browser. A fairly normal view when I&#39;m coding! Patching. I submitted an extremely simple patch to the Drupal Annotation module (fixing a misspelled variable) as a way of learning the process; my patch was accepted into the module. Now I know how to create patches when I want to share further work with others using Drupal Annotation. Installation profiles. I&#39;m currently working on two separate local versions of the Infinite Ulysses website: one to work on improving the Annotation function code, and one for work on everything else (e.g. user profiles, site content, theming). As I work on the site&#39;s annotation abilities, I fairly often want to reinstall the site as a slightly quicker alternative to weeding all the references to annotation code out of the database (I should set up uninstall hooks to do this for me eventually...), or to see whether the code works correctly when installing the modules into a new site. Keeping the annotation work on a separate site lets me do this without losing my other work on the site. But! I don&#39;t want to start from a standard Drupal blank site every time I need to reinstall my annotation code; I want a sample page of Ulysses to test the code on, user permissions already set up, modules installed, and various other things configured that I&#39;d rather not do manually every time I reinstall the site. Installation profiles are a way to avoid starting from square one with a Drupal site, instead automatically pre-configuring the site as you&#39;d like it to be (think of it like a module that tells the site to configure and install things a certain way during the site installation process). When I visit install.php, I now have a &quot;Infinite Ulysses Pop-Up&quot; option in addition to standard or minimal Drupal installations. Eventually, this profile will turn into a distribution, such that anyone can use it to install a Drupal site pre-configured to act as a participatory digital edition. Annotation sidebar. The Annotator.js code I&#39;m working with displays annotations as pop-ups hovering over the text, but from experience with my UlyssesUlysses prototype and usability research, I prefer having annotations authored and displayed in a sidebar. This will also be handy for the tablet version of the website, as you&#39;ll be able to slide the annotation sidebar off and on the page like a drawer. I&#39;ve been playing around with a couple ways of achieving this: modifying this existing CoffeeScript or this extension of that code (demo&#39;d here) to work with Drupal, creating the sidebar by resetting the current CSS on annotation pop-ups and styling them into a sidebar, or a tactic such as this repo which purports to display annotations as Drupal comments. Book-page styling. I&#39;ve been vacillating a bit as to the final display structure of the novel: I&#39;m pretty sure I either want to have one page per chapter of the book and infinite scroll to put all the text of a chapter on one page, or have separate pages to match up with each page of the 1922 text of the novel (which I&#39;m using). This is something I might end up doing A/B testing on, showing the text to some visitors one way and to other visitors the other way, and comparing their reactions and stats such as time spent on the site. Here are some questions I&#39;ll need whatever solution I use to address: How many annotations can load on a page at a time? How does this limit or non-limit affect site speed? How do annotations load on a very long page that only loads partial sections of the text at a time (when they&#39;re scrolled to, i.e. infinite scroll)? How will bookmarking on the site work—will a reader&#39;s last visited and furthest page in the book be marked as where they should start next, or will users have the option (or necessity) to bookmark one or more pages themselves? If I do offer one long scrolling webpage per chapter of the novel, can I easily generate bookmarks that jump a reader down to the last line they were reading? What other ways can users chart their progress through the book, such as badges per chapter, or a progress bar for pages read? What if readers want to read it out of order, or only some parts online (and mark parts they read offline as completed)? What if they want to glance ahead without losing the bookmark at where they actually want to pick up reading next? Long-term thinking. I met with the artist and IP lawyer behind the excellent web/iPad comic of Ulysses (Ulysses Seen). We&#39;re all keenly interested in opening Ulysses to more public reading and conversation; they want a way for comic readers to be able to jump from the comic to the text, and I&#39;m also interested in supporting the comic&#39;s readers in enjoying the text—so we&#39;ve been discussing combining our websites into one super-accessible, textual and visual Ulysses edition, after I&#39;ve defended my dissertation. This is also a good way for me to think about how I&#39;ll manage hosting costs and moderation effort in the future. Other summer activities included lots of reading (as much as I read, I&#39;m always adding more links to my reading list every time I go on Twitter), researching the social modules I want to use on annotations, and drafting site content. In particular, I&#39;ve been looking into how existing communities (especially online ones where people submit text and/or converse) have succeeded in building friendly spaces, self-moderating, creating community guidelines, and fostering an inclusive and welcoming atmosphere.","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2014/09/23/infinite-ulysses-technical-update-summer-2014"},"url":"http://localhost:4000/2014/09/23/infinite-ulysses-technical-update-summer-2014"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body>
  <div class="container">
    <div class="four columns sidebar">
      <nav>
  <h1><a href="http://www.literaturegeek.com">Literature Geek</a></h1>
  <a href="http://www.literaturegeek.com">
    <img src="/logo.png" id="logo" alt="LiteratureGeek.com blog logo"/>
  </a>
  <h2>Amanda Visconti</h2>
  <div id="bio">

<nav><a class="sidebar-nav-item" href="http://www.AmandaVisconti.com"><i class="fa fa-star"></i>
About Amanda Visconti</a></nav>

<nav><a class="sidebar-nav-item" href="mailto:amandavisconti@gmail.com?Subject=ContactFromLiteratureGeekBlog"><i class="fa fa-envelope"></i>
Contact</a></nav>

<nav><a class="sidebar-nav-item" href="http://amandavisconti.com/AmandaVisconti_Resume.pdf"><i class="fa fa-download"></i>
 Download resume</a></nav>

<nav><a class="sidebar-nav-item" href="/tags"><i class="fa fa-tag"></i>
 Posts by topic & date</a></nav>
 
<nav><a class="sidebar-nav-item" href="/speaking"><i class="fa fa-eye"></i> Invited speaking</a></nav>

<nav><a class="sidebar-nav-item" href="http://Dr.AmandaVisconti.com"><i class="fa fa-university"></i> My DH dissertation</a></nav>

<nav><a class="sidebar-nav-item" href="/tag/dissertation/"><i class="fa fa-pencil"></i>
 Dissertation posts</a></nav>

<nav><a class="sidebar-nav-item" href="http://www.InfiniteUlysses.com"><i class="fa fa-book"></i>
 Infinite Ulysses</a></nav>

  </div>
  <div id="social">
    Follow me:
<div id="stalker">
  
  <a title="amandavisconti on Github" href="https://github.com/amandavisconti">
    <i class="fa fa-github-square"></i>
  </a>
  

  
  <a title="literature_geek on Twitter" href="https://twitter.com/literature_geek">
    <i class="fa fa-twitter-square"></i>
  </a>
  

  
  <a title="Amanda Visconti on LinkedIn" href="https://www.linkedin.com/in/amandavisconti">
    <i class="fa fa-linkedin-square"></i>
  </a>
  

  
  <a title="Atom feed" id="atom" href="/atom.xml">
    <i class="fa fa-rss-square"></i>
  </a>
  
</div>

  </div>
</nav>

    </div>

    <div class="eleven columns content">
      <p class="meta">
  September 23, 2014 <em>by</em> Amanda Visconti
  <a href="/">
    <i class="home fa fa-home"></i>
  </a>
</p>

<h1 class="title">Infinite Ulysses Technical Update: Summer 2014</h1>

<div id="post">
  <p>The core functionality of my website is the ability to highlight pieces of the Ulysses text and leave annotations on them (questions/answers, interpretations, contextualizations, notes); to achieve this, I'm building off <a href="http://annotatorjs.org">Annotator.js</a>—Javascript code that lets you do what I just described, with a variety of plugin code that lets you add neat features like a heatmap of where the most annotations appear on a text (e.g. on what pages did readers have the most questions? what pages had the most contentious interpretations?). Since the site itself is built with Drupal, I'm using the Drupal modules already built to let Annotator.js work with, for example, Drupal's database as the place to store readers' annotations.</p>
<h2>Not as easy as it sounded (is it ever?)</h2>
<p><img src="/assets/tagstoragecrossbones.jpg" alt="That is the Drupal log under the skull and crossbones." width="225" height="300"></p><p>That's the Drupal logo under the skull and crossbones. This was on my home dry-erase board for a while...</p>
<p>My original project plan was to spend a lot of time coding the look and behavior of the reading interface, with the site functionality not re-inventing various wheels, but instead making connections among existing sets of code that allow textual annotation and social commentary, voting, ranking, etc. In practice, the existing Drupal-module versions of Annotator.js are buggy. Two big examples (for me):</p>
<ul>
<li>the Drupal Annotation modules (<a href="https://www.drupal.org/project/annotation" >Annotation</a> and <a href="https://www.drupal.org/project/annotator" >Annotator</a>) don't store tags added to annotations, so any tags added by a reader disappear forever on refreshing or changing the page (and tags really need to be treated as entities in their own right, and tied into the core Drupal taxonomy); and</li>
<li>the code that sets up an individual textual annotation to be an "entity" (a Drupal type of content—such as a blog post, book page, or comment—that other existing Drupal modules automatically know how to act on) isn't completely working either (e.g. you can't add fields—such as a field to add tags to an annotation, fixing the tag storage problem—with the current code).</li>
</ul>
<p>Having everything <em>not</em> go as smoothly as planned was actually great, though! I had a realistic goal in terms of what I needed to get done by the end of the summer to stay on track (have the site's main functions almost all working, ready to be completely finished at the end of September), and I wasn't worried about doing different work than expected to achieve those goals. Having the Drupal annotation modules need more work than expected meant I got to spend the summer trying various things to solve these issues, and learning a lot in consequence—like creating non-basic custom Drupal entities.</p>
<p>For example, I learned how to make a custom entity fieldable (able to have fields, like a place where you can add tags and have them autocomplete if they match existing tags) and add some fields to it, both by writing code ("programmatically") as well as via the Drupal admin interface (after making the annotation visible to the core Field UI module). I also read through the Annotator code so many times that I became much more comfortable with it, so I'll be able to augment it in the future far more easily.</p>
<p>In the end, it looks like I'll be building off the code fix created by another DH developer who was kind enough to start an online conversation with me about our mutual work improving textual annotation in Drupal (more on that project once they've decided to make their code public). I went back and forth about whether I wanted to build off their solution or keep hacking at my own, but in the end I hadn't been expecting to need to make those code fixes in the first place, so I decided I'd keep my remaining coding time this year free for expected work with the actual reading interface, like making a heatmap of the annotations and porting other existing Javascript/Coffeescript plugins to work with the Drupal version of Annotator.</p>
<h2>Other summer work</h2>
<p><img src="/assets/BlogSnap1.png" alt="Screengrab of many many tabs open across the top of my browser." width="1343" height="35"></p><p>Screengrab of many many tabs open across the top of my browser. A fairly normal view when I'm coding!</p>
<p><strong>Patching. </strong>I submitted an <a href="https://www.drupal.org/node/2329271" >extremely simple patch</a> to the Drupal Annotation module (fixing a misspelled variable) as a way of learning the process; my patch was accepted into the module. Now I know how to create patches when I want to share further work with others using Drupal Annotation.</p>
<p><strong>Installation profiles. </strong>I'm currently working on two separate local versions of the Infinite Ulysses website: one to work on improving the Annotation function code, and one for work on everything else (e.g. user profiles, site content, theming). As I work on the site's annotation abilities, I fairly often want to reinstall the site as a slightly quicker alternative to weeding all the references to annotation code out of the database (I should set up uninstall hooks to do this for me eventually...), or to see whether the code works correctly when installing the modules into a new site. Keeping the annotation work on a separate site lets me do this without losing my other work on the site.</p>
<p>But! I don't want to start from a standard Drupal blank site every time I need to reinstall my annotation code; I want a sample page of Ulysses to test the code on, user permissions already set up, modules installed, and various other things configured that I'd rather not do manually every time I reinstall the site. <a href="https://www.drupal.org/developing/distributions" >Installation profiles</a> are a way to avoid starting from square one with a Drupal site, instead automatically pre-configuring the site as you'd like it to be (think of it like a module that tells the site to configure and install things a certain way during the site installation process). When I visit install.php, I now have a "Infinite Ulysses Pop-Up" option in addition to standard or minimal Drupal installations. Eventually, this profile will turn into a distribution, such that anyone can use it to install a Drupal site pre-configured to act as a participatory digital edition.</p>
<p><strong>Annotation sidebar. </strong>The Annotator.js code I'm working with displays annotations as pop-ups hovering over the text, but from experience with my <a href="http://www.UlyssesUlysses.com" >UlyssesUlysses</a> prototype and usability research, I prefer having annotations authored and displayed in a sidebar. This will also be handy for the tablet version of the website, as you'll be able to slide the annotation sidebar off and on the page like a drawer. I've been playing around with a couple ways of achieving this: modifying <a href="https://github.com/habeanf/annotator/blob/master/src/plugin/marginviewer.coffee" >this existing CoffeeScript</a> or <a href="https://github.com/albertjuhe/annotator_view" >this extension of that code</a> (<a href="http://ec2-54-191-181-65.us-west-2.compute.amazonaws.com:3060/annotation/mary/demo.html" >demo'd here</a>) to work with Drupal, creating the sidebar by resetting the current CSS on annotation pop-ups and styling them into a sidebar, or a tactic such as <a href="https://github.com/artaphis/annotator_comments" >this repo</a> which purports to display annotations as Drupal comments.</p>
<p><strong>Book-page styling.</strong> I've been vacillating a bit as to the final display structure of the novel: I'm pretty sure I either want to have one page per chapter of the book and infinite scroll to put all the text of a chapter on one page, or have separate pages to match up with each page of the 1922 text of the novel (which I'm using). This is something I might end up doing A/B testing on, showing the text to some visitors one way and to other visitors the other way, and comparing their reactions and stats such as time spent on the site. Here are some questions I'll need whatever solution I use to address:</p>
<ul>
<li>How many annotations can load on a page at a time? How does this limit or non-limit affect site speed?</li>
<li>How do annotations load on a very long page that only loads partial sections of the text at a time (when they're scrolled to, i.e. infinite scroll)?</li>
<li>How will bookmarking on the site work—will a reader's last visited <em>and</em> furthest page in the book be marked as where they should start next, or will users have the option (or necessity) to bookmark one or more pages themselves?</li>
<li>If I do offer one long scrolling webpage per chapter of the novel, can I easily generate bookmarks that jump a reader down to the last line they were reading?</li>
<li>What other ways can users chart their progress through the book, such as badges per chapter, or a progress bar for pages read?</li>
<li>What if readers want to read it out of order, or only some parts online (and mark parts they read offline as completed)? What if they want to glance ahead without losing the bookmark at where they actually want to pick up reading next?</li>
</ul>
<p><strong>Long-term thinking.</strong> I met with the artist and IP lawyer behind the excellent web/iPad comic of Ulysses (<a href="http://www.ulyssesseen.com" >Ulysses Seen</a>). We're all keenly interested in opening Ulysses to more public reading and conversation; they want a way for comic readers to be able to jump from the comic to the text, and I'm also interested in supporting the comic's readers in enjoying the text—so we've been discussing combining our websites into one super-accessible, textual <em>and</em> visual Ulysses edition, after I've defended my dissertation. This is also a good way for me to think about how I'll manage hosting costs and moderation effort in the future.</p>
<p><strong>Other summer activities</strong> included lots of reading (as much as I read, I'm always adding more links to my reading list every time I go on Twitter), researching the social modules I want to use on annotations, and drafting site content. In particular, I've been looking into how existing communities (especially online ones where people submit text and/or converse) have succeeded in building friendly spaces, self-moderating, creating community guidelines, and fostering an inclusive and welcoming atmosphere.</p>

<p><em>I successfully defended my <a href="http://dr.AmandaVisconti.com">digital humanities doctoral dissertation</a> in Spring 2015. The now-available <a href="http://www.InfiniteUlysses.com">Infinite Ulysses</a> social+digital reading platform is part of that project; <a href="http://www.InfiniteUlysses.com">come read with us</a>!</em></p>
</div>

<div id="related">
  <h3>Recent posts</h3>
  <ul class="posts">
    
    <li>
      <span>26 Feb 2018 &raquo;</span> <a href="/2018/02/26/digital-humanities-dissertation-starter-kit">Starter kit for considering a DH dissertation</a>
    </li>
    
    <li>
      <span>30 Jun 2017 &raquo;</span> <a href="/2017/06/30/making">Making a pneumatic tube messaging system</a>
    </li>
    
    <li>
      <span>05 Apr 2017 &raquo;</span> <a href="/2017/04/05/???">???</a>
    </li>
    
  </ul>
</div>


      <div class="footer">
        <div class="disclaimer">

  <p>
    <a href="https://creativecommons.org/licenses/by-nc/2.0/">CC BY-NC</a> by <a href="http://www.AmandaVisconti.com">Amanda Visconti</a> &mdash; a customization of the <a href="https://github.com/swanson/lagom">Lagom theme</a>
  </p>
</div>
      </div>
    </div>
  </div>


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6075782-3']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>
